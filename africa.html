<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Africa Map</title>

<style>
/* === SAME CSS – UNCHANGED === */
body {
  margin: 0;
  font-family: Arial, sans-serif;
}

/* Map area */
#map-area {
  width: 100%;
  height: 100vh;
}

/* Tooltip */
.tooltip {
  position: fixed;
  background: rgba(0,0,0,0.85);
  color: #fff;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 13px;
  pointer-events: none;
  opacity: 0;
  transition: 0.15s;
  z-index: 2000;
}
.tooltip.visible {
  opacity: 1;
}

/* Sidebar */
#sidebar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  max-height: 70%;
  background: #111;
  color: #fff;
  transform: translateY(100%);
  transition: transform 0.3s ease;
  z-index: 1500;
}
#sidebar.active {
  transform: translateY(0);
}
</style>
</head>

<body>

<!-- ================= MAP ================= -->
<div id="map-area">
  <svg id="svg-map" viewBox="0 0 1000 1000">

    <!-- SAMPLE PATH (YOU WILL FILL ALL PATHS) -->
    <!--
    <path
      d="..."
      data-name="Egypt"
      data-group="North Africa">
    </path>

    <path
      d="..."
      data-name="Democratic Republic of the Congo"
      data-group="Central Africa">
    </path>
    -->

  </svg>
</div>

<!-- ================= TOOLTIP ================= -->
<div class="tooltip"></div>

<!-- ================= SIDEBAR ================= -->
<div id="sidebar">
  <div class="sidebar-header">
    <h3 id="sidebar-title">Country Details</h3>
    <button id="sidebar-close">Close</button>
  </div>

  <div class="sidebar-content">
    <p id="sidebar-country">Select a country from the map</p>
    <p id="sidebar-group"></p>
  </div>
</div>

<!-- ================= SCRIPT ================= -->
<script>
/* === EXISTING STRUCTURE – UNCHANGED LOGIC === */

const svg = document.getElementById("svg-map");
const paths = svg.querySelectorAll("path");
const tooltip = document.querySelector(".tooltip");
const sidebar = document.getElementById("sidebar");
const sidebarClose = document.getElementById("sidebar-close");

let activePath = null;

/* === TOOLTIP === */
paths.forEach(path => {

  path.addEventListener("mouseenter", () => {
    tooltip.innerHTML =
      "<strong>" + path.dataset.name + "</strong><br>" +
      path.dataset.group;
    tooltip.classList.add("visible");
  });

  path.addEventListener("mousemove", e => {
    tooltip.style.left = e.clientX + 12 + "px";
    tooltip.style.top = e.clientY + 12 + "px";
  });

  path.addEventListener("mouseleave", () => {
    tooltip.classList.remove("visible");
  });

  path.addEventListener("click", e => {
    e.stopPropagation();

    if (activePath) activePath.classList.remove("active");
    activePath = path;
    path.classList.add("active");

    document.getElementById("sidebar-country").innerText = path.dataset.name;
    document.getElementById("sidebar-group").innerText = path.dataset.group;

    sidebar.classList.add("active");
  });
});

/* === CLOSE SIDEBAR === */
function closeSidebar() {
  sidebar.classList.remove("active");
  if (activePath) {
    activePath.classList.remove("active");
    activePath = null;
  }
  tooltip.classList.remove("visible");
}

sidebarClose.addEventListener("click", closeSidebar);

/* === CLICK OUTSIDE MAP === */
document.addEventListener("click", e => {
  if (!sidebar.classList.contains("active")) return;
  if (svg.contains(e.target)) return;
  if (sidebar.contains(e.target)) return;
  closeSidebar();
});

/* === MOBILE SWIPE DOWN === */
let startY = 0;

sidebar.addEventListener("touchstart", e => {
  startY = e.touches[0].clientY;
});

sidebar.addEventListener("touchend", e => {
  const endY = e.changedTouches[0].clientY;
  if (endY - startY > 80) {
    closeSidebar();
  }
});
</script>

</body>
</html>
